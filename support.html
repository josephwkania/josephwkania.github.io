<!DOCTYPE HTML>
<!--
	e-MERLIN Web Design
	
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>e-MERLIN Support</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="icon" href="/images/emerlinicon.png">
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="science is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header">

					<!-- Inner -->
						<div class="inner">
							<header>
								<h1><a href="#banner" id="logo"><img src="images/e-MERLIN_logo_small_icon.png" alt="" /></a></h1>
								<h1><a  id="logo">Observing Support</a></h1>
								
							</header>
						</div>

					<!-- Nav -->
						<nav id="nav">
							<ul>
								<li><a href="index.html">Home</a></li>
								<li><a href="news.html">News</a></li>

								<li><a href="science.html">Science</a></li>
								<li><a href="observe.html">Observe</a></li>
								<li><a href="support.html">Support</a></li>
								<li><a href="vlbi.html">VLBI</a></li>
								<li>
									<a href="#">Quick Links</a>
									<ul>
										<li><a href="propose.html" target="_blank">Proposal Tool</a></li>
										<li><a href="calc.html" target="_blank">Sensitivity Calculator</a></li>
										<li><a href="observe.html#tech">Capabilities</a></li>
										<li><a href="index_old.html" target="_blank">old e-MERLIN website</a></li>
										
										

										<li>
											<a href="support.html">Data Reduction &hellip;</a>
											<ul>
												<li><a href="support.html#pipeline">e-MERLIN Pipeline Support</a></li>
												<li><a href="https://github.com/e-merlin/eMERLIN_CASA_pipeline" target="_blank">Download e-MERLIN CASA Pipeline from Github</a></li>
												<li><a href="support.html#aips">AIPS Pipeline</a></li>
												
			
											</ul>
										</li>	
									</ul>
								
								
								</li>
							</ul>
						</nav>


				</div>

			<!-- Main -->
				<div class="wrapper style1">

					<div class="container">
						<div class="row gtr-200">
							<div class="col-4 col-12-mobile" id="sidebar">
								<hr class="first" />
								<section>
									<header>
										<h3>Observation Support Scientists</h3>
									</header>
									<p>
										If your proposal has won time on e-MERLIN, you will receive regular
										updates from one of our support scientists. If you need to get in touch with a support
										scientist for any reason then you can contact one. If you need assistance with proposing an observation then
										please do have a look at the <a href="observe.html">'observe'</a> section first.
									</p>
									<footer>
										<a href="mailto:emerlin.support@jb.man.ac.uk" class="button">Contact Support Scientist</a>
									</footer>
								</section>
								<hr />
								<section>
									<header>
										<h3>Observation & Delivery Cycle</h3>
									</header>
									<p>
										Observations follow a typical cycle from acceptance, scheduling through to Quality Assessment and delivery.
									</p>
									<div class="row gtr-50">
										<div class="col-4">
											
											<h1 class="icon fa-file circled" style="color:white"><span class="label"></span></h1>
											
										</div>
										<div class="col-8">
											<h4>Confirmation</h4>
											<p>
												If a proposal is granted time by the e-MERLIN Time Allocation Group, they will allocate a priority before passing it
												to our scheduling team. You as PI will receive a notification of your priority and the approximate time frame in which your
												experiment will be observed.
											</p>
										</div>
										<div class="col-4">
											<h1 class="icon fa-binoculars circled"><span class="label"></span></h1>
										</div>
										<div class="col-8">
											<h4>Observation</h4>
											<p>
												Once your project has been observed it will be assessed by a scheduler at JBO for factors that
												may lead to data reduction problems. If the observation passes this first stage then it
												continues to Data Reduction & Quality Assessment (QA). If there are problems identified then it may require additional
												work.
											</p>
										</div>
										<div class="col-4">
											<h1 class="icon fa-database circled"><span class="label"></span></h1>
										</div>
										<div class="col-8">
											<h4>Data Reduction</h4>
											<p>
												The data is processed
												using our customised rapid data reduction tools, based around CASA. This data
												reduction process averages down the data for calibration and analysis.
												
											</p>
										</div>
										<div class="col-4">
											<h1 class="icon fa-bar-chart circled"><span class="label"></span></h1>
										</div>
										<div class="col-8">
											<h4>Detailed Report</h4>
											<p>
												Following QA, the PI will receive an email detailing the data reduction results including basic imaging. This will contain
												 images of the calibrators, targets, and further statistics.
											</p>
										</div>
										<div class="col-4">
											<h1 class="icon fa-telegram circled"><span class="label"></span></h1>
										</div>
										<div class="col-8">
											<h4>Data Delivery</h4>
											<p>
												We will send you as PI your data by a direct link for download as CASA MS or AIPS FITS files, or on request as raw uncalibrated FITS-IDI files. You can always contact the e-MERLIN Support team for expert assistance.
										
											</p>
										</div>
									</div>
									<footer>
										<a href="mailto:emerlin.support@jb.man.ac.uk" class="button">Contact Support Scientist</a>

									</footer>
								</section>
							</div>
							<div class="col-8 col-12-mobile imp-mobile" id="content">
								<article id="main">
									<header>
										<h2>Observing, Data Reduction and Imaging</h2>
										<p>
											Observations follow a typical cycle from acceptance, scheduling through to Quality Assessment and delivery. A full explanation of these steps is in the sidebar (or below for mobile users). Following the quality assessment of your observation, you will be notified by one of our support scientists
											with the details of its initial calibration by our rapid data reduction process. Following this pipelining, which uses
											the <a href="https://casa.nrao.edu/" target="_blank">CASA</a> suite (developed by NRAO), you will receive an averaged, calibrated dataset in
											either CASA MS or AIPS FITS format. You may also choose to receive the original un-averaged data
											if you prefer to reduce it yourself. <br>You are very welcome to contact our e-MERLIN Support team
											for training in the use of our bespoke tools.
										</p>
									</header>
									<a class="image featured" title="M82: The Cigar Galaxy. Composite e-MERLIN+JVLA image (Dr T. Muxlow)."><img src="images/M82_vista.png" alt="" /></a>
									<p>
										By default you will receive calibrated data, pre-averaged by a factor of 4 in time and 4 in frequency (hence 16x smaller
										than the original). The data will also have been flagged for high level Radio Frequency Interference (RFI) and checked for major problems. Standard calibration on the continuum and spectral line data will be applied. 
										Basic images will also have been produced, although these are unlikely to be publishable without further work. Any step in the pipeline can be tuned and repeated to optimise the calibration process. 
										The processing of your data by our Data Reduction Pipeline is detailed below. Published work produced using e-MERLIN data should include the acknowledgement; <i>e-MERLIN is a National Facility operated by the University of Manchester at Jodrell Bank Observatory on behalf of STFC.</i>
									</p>
									
									
									
									
									
									
									<section>
									<section id="pipeline">
										<header>
											<h2><img src="images/eMCP_logo.png" width = "80"  style="vertical-align:middle">  e-MERLIN CASA Pipeline</h2>
										</header>
										<p>
											The e-MERLIN CASA Pipeline (eMCP) is a Python package composed of different modules that can be run together sequentially
											to calibrate an e-MERLIN dataset, producing calibration tables, calibrated data, assessment plots and a summary weblog.
											In its most general mode, it can take FITS-IDI files provided by e-MERLIN and produce a calibrated dataset
											and initial images to check the quality of the observation. It can process automatically L, C and K band continuum and spectral-line
											e-MERLIN data sets. (Polarisation calibration currently requires manual calibration.)
										</p>
										<p>
											The pipeline can be used by any user interested in reducing e-MERLIN data and provides an easy, 
											ready-to-use toolkit that delivers calibrated data in a consistent, clear and repeatable way. We have tried to keep the dependencies 
											to a minimum so that any external user can use it. The only requirements are CASA (v5.4+), Python (v2.7), and optionally AOFlagger 
											(to conduct automatic RFI flagging at L band). The pipeline scripts and the documentation can be downloaded from the open github repository and used 
											immediately, as no further installation is required.
										</p>
										
										<a href="https://github.com/e-merlin/eMERLIN_CASA_pipeline" class="button" target="_blank">Download e-MERLIN CASA Pipeline</a>
									</section>
									
									
									<section>	
									<h2 id="Pipeline info">Running the Pipeline</h2>

									<p></p>
									<p>
									The pipeline is executed simply by running the e-MERLIN Pipeline Python script with an associated input file containing details of target source and calibrators.
									</p>
									<table bgcolor="#eeeeee" border="3px" cellspacing = "0" cellpadding = "4px" style="width:60%">
									<td>> casa -c eMERLIN_CASA_pipeline.py -i <i>input_file.py</i></td>
									</table>
									<p>
									All calibration parameters can be tuned using input files. A weblog is produced as the pipeline is 
									executed so that each stage can be monitored in a user-friendly manner as illustrated in the table below, which is an output from an actual pipelined observation.
									</p>
									
									
									<h4>e-MERLIN Pipeline Execution Summary</h4>
									<table bgcolor="#eeeeee" border="3px" cellspacing = "0" cellpadding = "4px" style="width:100%">
									<tr><th style='width: 15%;'>Step</th><th style='width: 4%;'>Code</th><th style='width: 28%;'>Execution ended</th><th style='width: 8%;'>Execution time</th><th style='width: 70%;'>Notes</th></tr>
									<tr><td>start_pipeline</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 14:59:28</td>
									<td align="center">-</td>
									<td>first execution</td></tr>
									<tr><td>importfitsIDI</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:08:03</td>
									<td align="center"> 9 min</td>
									<td>constobsid=True, scanreindexgap_s=15.0</td></tr>
									<tr><td>mstransform</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:11:58</td>
									<td align="center"> 4 min</td>
									<td>hanning=False, createmms=False, timebin=4s</td></tr>
									<tr><td>fixvis</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:12:15</td>
									<td align="center"><1 min</td>
									<td></td></tr>
									<tr><td>aoflagger</td><td bgcolor=#EEEEEE></td>
									<td align="center">0</td>
									<td align="center">-</td>
									<td></td></tr>
									<tr><td>flag_apriori</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:14:39</td>
									<td align="center"> 2 min</td>
									<td></td></tr>
									<tr><td>flag_manual</td><td bgcolor=#EEEEEE></td>
									<td align="center">0</td>
									<td align="center">-</td>
									<td></td></tr>
									<tr><td>average</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:15:51</td>
									<td align="center"> 1 min</td>
									<td>chanbin=4, timebin=4s, datacolumn=data</td></tr>
									<tr><td>shift_field_pos</td><td bgcolor=#EEEEEE></td>
									<td align="center">0</td>
									<td align="center">-</td>
									<td></td></tr>
									<tr><td>plot_data</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:19:09</td>
									<td align="center"> 3 min</td>
									<td></td></tr>
									<tr><td>save_flags</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:19:10</td>
									<td align="center"><1 min</td>
									<td>versionname=initialize_flags</td></tr>
									<tr><td>restore_flags</td><td bgcolor=#EEEEEE></td>
									<td align="center">0</td>
									<td align="center">-</td>
									<td></td></tr>
									<tr><td>flag_manual_avg</td><td bgcolor=#EEEEEE></td>
									<td align="center">0</td>
									<td align="center">-</td>
									<td></td></tr>
									<tr><td>init_models</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:19:27</td>
									<td align="center"><1 min</td>
									<td></td></tr>
									<tr><td>bandpass</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:21:15</td>
									<td align="center"> 2 min</td>
									<td>field=1407+284, combine=field,scan, solint=inf</td></tr>
									<tr><td>initial_gaincal</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:27:57</td>
									<td align="center"> 7 min</td>
									<td>delay solint=180s, combine=spw, flagmode=tfcrop, p_solint=int, ap_solint=32s</td></tr>
									<tr><td>fluxscale</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:28:16</td>
									<td align="center"><1 min</td>
									<td></td></tr>
									<tr><td>bandpass_sp</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:28:29</td>
									<td align="center"><1 min</td>
									<td>field=1407+284, combine=field,scan, solint=inf</td></tr>
									<tr><td>gain_amp_sp</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:29:41</td>
									<td align="center"> 1 min</td>
									<td>ap_solint=32s</td></tr>
									<tr><td>applycal_all</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:30:23</td>
									<td align="center"><1 min</td>
									<td></td></tr>
									<tr><td>flag_target</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:31:17</td>
									<td align="center"><1 min</td>
									<td>mode=tfcrop, maxnpieces=7, timecutoff=4.5, freqcutoff=4.5</td></tr>
									<tr><td>plot_corrected</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:35:30</td>
									<td align="center"> 4 min</td>
									<td></td></tr>
									<tr><td>first_images</td><td bgcolor=#008B45></td>
									<td align="center">2018-11-23 15:47:32</td>
									<td align="center">12 min</td>
									<td></td></tr>
									</table>
									Green = executed<br>Red = executed but outdated by a previous step (no red in this example)<br><br>
									
									<p>
									In the above example, a 6 hour observation at C band, all stages were processed to completion in less than 1 hour.
									The weblog produced by the pipeline includes plots with statistics of all steps including flagging, calibration,
									band-pass calibration as well as both raw (dirty) images and deconvolved images (at two scales) of both the phase calibrator and 
									the target itself. The following plots were produced by the e-MERLIN pipeline without user intervention.
									</p>
									<a  class="image featured"><img src="images/flagged.png" alt="" /></a>
									<a  class="image featured"><img src="images/delay.png" alt="" /></a>
									<a  class="image featured"><img src="images/bandpass.png" alt="" /></a>
									<a  class="image featured"><img src="images/gainamp.png" alt="" /></a>
									<a  class="image featured"><img src="images/gainphase.png" alt="" /></a>	
									<a  class="image featured"><img src="images/phasecal.jpg" alt="" /></a>	
									
									<p>Full documentation on the e-MERLIN Pipeline is included on the e-MERLIN CASA Pipeline Github Repository.</p>
									<a href="https://github.com/e-merlin/eMERLIN_CASA_pipeline" class="button" target="_blank">Download e-MERLIN CASA Pipeline</a>
									<p><br></p>
									
									</section>
									
									<section>
									<section id="aips">
									<header>
										<h3>Rather use AIPS?</h3>
									</header>
										<p>
											In additional to the standard e-MERLIN CASA pipeline discussed above, an e-MERLIN <a href="http://dx.doi.org/10.5334/jors.bp" target="_blank">AIPS pipeline</a> is 
											still available for <a href="https://github.com/mkargo/pipeline" target="_blank">download</a>. This is
											no longer actively maintained, however all the files necessary to execute it are present in its Github repository.
											As well as having a modern version of AIPS installed, you require the Python-to-AIPS scripting language
											 <a href="http://www.jive.nl/jivewiki/doku.php?id=parseltongue:parseltongue" target="_blank"><i>parseltongue</i></a> to function. The pipeline includes
											full calibration, imaging, and optionally the RFI flagging tool <a href="https://github.com/daniellefenech/SERPent" target="_blank"><i>serpent</i></a>.
											Details on how to use the e-MERLIN AIPS pipeline are described in the <a href="http://www.souk.ac.uk/data_red/tools/e-merlin-cookbook_V3.0_Feb2015.pdf" target="_blank">
											e-MERLIN Cookbook</a>.
										</p>
										<br>
										<a href="https://github.com/mkargo/pipeline" target="_blank" class="button">Download AIPS Pipeline</a>
									</section>
								</article>
							</div>
						</div>
						
				
					</div>

				</div>


			<!-- Footer -->
				<div id="footer">
					<div class="container">
						<div class="row">

							<!-- Contacts -->
								<section class="col-4 col-12-mobile">
									<header>
										<h2 class="icon fa-envelope circled"><span class="label">Contacts</span></h2>
									</header>
									<ul class="divided">
										<li>
											<article class="post stub">
											<h1 class="timestamp">e-MERLIN Support e-mail</h1>
												<a href="mailto:emerlin.support@jb.man.ac.uk" span class="inline-flag">emerlin.support <span class="icon fa-at"> jb.man.ac.uk</span></a>

						<h1 class="timestamp">Head of e-MERLIN Scientific Operations: Prof Rob Beswick</h1>
												<!--<a href="mailto:" span class="inline-flag">rjbeswick <span class="icon fa-at"> souk.ac.uk</span></a>!-->											
											</article>
										</li>
										<li>
											<article class="post stub">
											<h1 class="timestamp">Postal Address of Jodrell Bank Centre for Astrophysics</h1>
												<span class="post stub" >e-MERLIN Suite, Alan Turing Building,<br> The University of Manchester. M13 9PL UK</span>
		
											</article>
										</li>
										<li>
											<article class="post stub">
											<h1 class="timestamp">Postal Address of e-MERLIN UK National Facility</h1>
												<span class="post stub" >e-MERLIN & VLBI National Facility,<br> Jodrell Bank Observatory, Macclesfield, SK11 9DL UK</span>
		
											</article>
										</li>

									</ul>
								</section>

							<!-- Posts -->
								<section class="col-4 col-12-mobile">
									<header>
										<h2 class="icon fa-file circled"><span class="label">Documents</span></h2>
									</header>
									<ul class="divided">
										<li>
											<article class="post stub">
												<header>
													<!-- <h3><a href="#">Director's Discretionary Time Requests</a></h3> -->
													<h3><a href="mailto:emerlin@jb.man.ac.uk?subject=DDT Request" span class="inline-flag">Director's Discretionary Time Request</span></a>
												</header>
												<span class="timestamp">Submitting a request to e-MERLIN Director: Prof Simon Garrington</span>
											</article>
										</li>
										<li>
											<article class="post stub">
												<header>
													<h3><a href="news.html#newsletter">Subscribe to the e-MERLIN & VLBI mailing list</a></h3>
												</header>
												<span class="timestamp">by the e-MERLIN Team at Jodrell Bank</span>
											</article>
										</li>

										<li>
											<article class="post stub">
												<header>
													<h3><a href="tools/eMCP-2.pdf" target="_blank" >e-MERLIN CASA Pipeline Manual</a></h3>
												</header>
												<span class="timestamp">by Dr Javier Moldon</span>											


											</article>
										</li>
									</ul>
								</section>

							<!-- Photos -->
								<section class="col-4 col-12-mobile">
									<header>
										<h2 class="icon fa-camera circled"><span class="label">Photos</span></h2>
									</header>
									<div class="row gtr-25">
										<div class="col-6">
											<a class="image fit"><img src="images/control_room_nov_1958.png" alt="" /></a>
										</div>
										<div class="col-6">
											<a  class="image fit"><img src="images/control_room_dials.jpg" alt="" /></a>
										</div>
										<div class="col-6">
											<a  class="image fit"><img src="images/map.png" alt="" /></a>
										</div>
										<div class="col-6">
											<a  class="image fit"><img src="images/beer_mat_front_emerlin.png" alt="" /></a>
										</div>

									</div>
								</section>

						</div>
						<br><br>

											
					
						<div class="row">
							<div class="col-12">
								
								
								<!-- Contact -->
									<section class="contact">
										<header>
											<!--<h3><span class="inline-flag"><img src="images/STFC-Logo.png" alt="" /><img src="images/evnlogo.png" alt=""/><img src="images/logo-uom.png" alt=""/></span></h3>-->
											<h3><span class="inline-flag"><img src="images/STFC-Logo.png" alt="" /><img src="images/evnlogo.png" alt=""/><img src="images/logo-uom.png" alt=""/><img src="images/ORP_small_logo.png" alt=""/></span></h3>
										</header>
										<p></p>
										<ul class="icons">
											<li><a href="https://twitter.com/eMERLINarray" target="_blank" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
											<li><a href="https://en-gb.facebook.com/JodrellBankObservatory/" target="_blank" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
											<li><a href="https://www.instagram.com/jodrellbank/" target="_blank" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
											<li><a href="mailto:emerlin@jb.man.ac.uk" class="icon fa-envelope"><span class="label">email</span></a></li>
											
										</ul>
									</section>

								<!-- Copyright -->
									<div class="copyright">
										<ul class="menu">
											<li>&copy; e-MERLIN. All rights reserved.</li><li></li>
										</ul>
									</div>
							</div>
						</div>
						
					</div>
				</div>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
